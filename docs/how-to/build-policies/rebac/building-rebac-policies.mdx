---
sidebar_position: 2
title: Building ReBAC Policies
---

import createResources from "/static/ui-videos/rebac/create-resources-and-actions.mp4";

Relationship-Based Access Control (ReBAC) policies determine access based on the relationships between users and resources.
Constructing ReBAC policies involves defining these relationships and specifying the associated permissions.

## Before you start

Before you begin molding your own ReBAC policy within Permit, it's essential to establish a clear understanding of the various
relationships that exist within your system, as these will form the core of your policy. Identify the key subjects
(users or entities) and objects (resources) and how they interact with each other, mapping out both direct and indirect
relationships.

Consider the nature of these relationships, whether hierarchical, peer-to-peer, or something more complex.
You should also have a grasp of the specific permissions that correspond to different relationships, and a thorough
understanding of the overall system architecture.

Having a well-defined set of roles and attributes for both subjects and objects can further refine the policy.
Assessing these prerequisites and having a detailed understanding of the relationships within your system ensures a
robust and effective ReBAC policy that aligns with your organization's needs and security requirements.

## Building a simple online event management policy with Permit

The Permit policy editor is very flexible for creating all types of policies, including policies as complex as ReBAC.
With ReBAC, we're going to map out not just the roles, but also how they interact with each other and the resources
they access.

In this guide, we will walk through the foundational steps to model a ReBAC policy for an online event management platform.
By the end, even if you're a novice to ReBAC, you'll have a firm grasp on how to design a policy tailored to your needs.

First, we establish the ground rules. Who should create events? Can all users view all events?
Who can issue refunds or modify ticket prices? These are examples of the decisions we'll need to make.

### Map out required policies

**Objective:** To establish the foundational access needs for the platform.

Begin by identifying the key users of the platform. This list typically includes event organizers, attendees,
sponsors, and platform administrators. Once identified, determine the primary activities these users will engage in,
such as creating events or purchasing tickets. It's imperative to establish the boundaries of what each user type
can and cannot do early on. For instance, only event organizers might have the permissions to modify event details,
while attendees can only view them.`

#### Roles

- **Event Organizers:** Responsible for event creation and management.
- **Attendees:** Users attending the events.
- **Platform Administrators:** Users with overall platform control.

### Create resources and actions

**Objective:** To recognize the main entities of the platform and outline their potential interactions.

Start by listing down primary resources like 'Events', 'Tickets', and 'User Profiles'.

Next, define the possible actions for each of these resources, such as 'Create', 'Purchase', 'View', 'Modify', and 'Cancel'.

Once these are listed, map out which actions apply to which resources. For example, while 'Events' can be both 'Created' and
'Modified', 'Tickets' might only be 'Purchased' or 'Canceled'.

So, here is what the initial mapping will look like:

#### Resources

- **Events:** Details of the occasion.
- **Tickets:** Entry pass for attendees.
- **User Profiles:** Information about each user.

#### Actions

- **Create:** Setting up new events or profiles.
- **Purchase:** Buying tickets.
- **View:** Accessing event details or profiles.
- **Modify:** Editing event details.
- **Cancel:** Canceling purchased tickets.

Events can be `created`, `viewed`, or `modified`.
Tickets can be `purchased` or `canceled`.
User Profiles can be `created`, `viewed`, `modified`, or canceled `deleted`.

<video controls>
	<source src={createResources} />
</video>

Here is what our resources will look like:

![Resources](/ui-videos/rebac/created-resources.png)

### Map our resource roles

**Objective:** To designate roles that will interact with the platform's resources.

Define the foundational roles, such as 'Event Organizer', 'Ticket Buyer', and 'Platform Admin'.

Each role should then have specific actions mapped to it. An 'Event Organizer', for instance, may be permitted to
'Create' and 'Modify' events. On the other hand, a 'Ticket Buyer' might only be able to 'Purchase' or 'Cancel' tickets.
Once these roles are defined, they can be assigned to specific users, granting them the associated permissions.

This process is known as Role Assignment.

### Map out resource relationships

**Objective:** To understand and establish the links between different resources.

First, pinpoint the core relationships between your resources. This could be the relationships where events are
"hosted by" organizers or tickets are "purchased by" buyers. To represent these relationships in a structured manner,
formulate Relationship Tuples.

An example of this would be [Event Z, "attended by", User Y].

Subsequently, it's essential to link the defined roles to these relationships. The 'Event Organizer' role, for instance,
might inherently encompass the relationship where an event is "created by" the organizer.

### Deciding on role derivations

**Objective:** To adapt the role system based on the evolving needs of the platform.

Analyze the platform's requirements to discern if there's a need for more specialized roles. For example,
the introduction of roles like 'Event Sponsors' or 'VIP Attendees' might be beneficial. When introducing new roles,
consider using existing roles as a basis. An 'Event Sponsor' might have permissions similar to an 'Event Organizer'
but with added capabilities, such as promoting events. After introducing any new roles, it's crucial to ensure that
these fit within the platform's overarching access policy.
