---
sidebar_position: 4
title: Performance
---

Choosing a stack to implement access control on, one of the questions arises is what is the performace abilities of the platform?

Since we offer multiple microservices built on top of each other, we will discuss each component performance separately

# OPA Performance

OPA is a general purpose policy engine.

OPAL describes policies in 2 ways 
- As a code in a langugage called Rego as its policy language.
- The policy data that supports the decision of the policy in JSON.

For example, the code can be RBAC (Role based access control), and the data will be the list of roles you have in your application, i.e. viewer, editor, admin.

From the Rego performance [article](https://www.openpolicyagent.org/docs/latest/policy-performance/):
<blockquote>
For low-latency/high-performance use-cases, e.g. microservice API authorization, policy evaluation has a budget on the order of 1 millisecond. Not all use cases require that kind of performance, and OPA is powerful enough that you can write expressive policies that take longer than 1 millisecond to evaluate. But for high-performance use cases, there is a fragment of the policy language that has been engineered to evaluate quickly. Even as the size of the policies grow, the performance for this fragment can be nearly constant-time.
</blockquote>

Even if you write a policy that is more complex and and requires more computation time, there are several ways to store the same policy in Rego, and to avoid performance common mistakes follow these links:
- Use Objects instead of Arrays [link](https://www.openpolicyagent.org/docs/latest/policy-performance/#use-objects-over-arrays).
- Apply rule indexing when needed - [blog](https://blog.openpolicyagent.org/optimizing-opa-rule-indexing-59f03f17caf3).
- Early exit in (some) rules - [link](https://www.openpolicyagent.org/docs/latest/policy-performance/#early-exit-in-rule-evaluation).

Additional tips available in the performance [article](https://www.openpolicyagent.org/docs/latest/policy-performance/).

# OPAL Performance

OPAL is what keeps OPA policy and data updated in real-time. 

OPAL is built as a client-server application, so let's talk about each one separately:

## The OPAL Server Performance

The OPAL server is in charge of the policy changes.

Immediately as a change is committed to Git, the OPAL server is triggered and notifies the OPAL clients, which in their turn update their policy agent.

The OPAL server and the OPAL client have their own communication channel and does not touch the main authorization channel.

## The OPAL Client Performance

The OPAL client feeds the OPA with all the policy and data changes, therefore it is deployed next to it as a side-car.

The OPAL Client is only subscribing to the changes it needs.

This means that even if you have a huge data set of data you need to support for your authorization logic, you can subscribe to a specific details you need. 