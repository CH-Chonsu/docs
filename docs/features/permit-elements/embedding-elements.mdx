import CodeDropdown from "@site/src/components/elements/CodeDropdown.js";
import HelpSupportTile from "@site/src/components/elements/HelpSupportTile.js";
import code from "@site/src/components/elements/codeBlock.json";

# Embedding Permit Elements into your App

<span className="subtitle-custom">
	Implementing Elements into your App is simple.
</span>
<br />
<br />

After you finish configuring and customising your element, you will be able to copy the code snippet generated for you.
This will be an `<iframe>` element that you can embed anywhere into your website.

Once the `<iframe>` is embedded, you need to follow these three steps for the code to take effect and work in your App.

<CodeDropdown
	number="1"
	title="Set up Permit"
	client
	code={[code.npm, code.yarn]}
	showLineNumbers={false}
	language="javascript"
	languages={["npm", "yarn"]}
	open
>
	Add the Permit JavaScript SDK to you app by running:
</CodeDropdown>

<CodeDropdown
	number="2"
	title="Initialize Permit"
	server
	code={[code.initialize]}
	language="javascript"
	languages={["JavaScript", "Python"]}
	open
>
	Add the Permit JavaScript SDK to you app. Remember to copy the `SDK Secret
	Key` from the Permit dashboard and pass it into the initialised Permit object.
</CodeDropdown>

### Creating a backend login route for the Elements

You need to create a route in your backend server to allow your client to access the Permit Element. There is two ways to do
his based on your implementations and how you are authenticating your users.

By default, the user will be authenticated and stored in a cookie, however, you can manually assign a different login method in the
next step, and therefore use a different route implementation in the backend.

<CodeDropdown
	number="3.1"
	title="Using Cookies"
	server
	code={[code.cookies]}
	language="python"
	languages={["JavaScript", "Python"]}
></CodeDropdown>

<CodeDropdown
	number="3.2"
	title="Using Bearer Token"
	server
	code={[code.bearer]}
	language="python"
	languages={["JavaScript", "Python"]}
></CodeDropdown>

### Calling the frontend login route

<CodeDropdown
    number="4"
    title="Elements Login Route"
    client
    code={[code.elementLogin]}
	language="javascript"
	languages={["JavaScript", "Python"]}
    open
>
    This is the permit element object that is calling the backend route we have
    configured previously and logging in the user.

</CodeDropdown>

There are two things that need to be configured here:

1.  `loginUrl` - The url that corresponds to the backend login route we created in the last step.
2.  `tenant` (Optional) - The name of the tenant that the user is part of.

### Defining the Login method

There are **3 supported login methods**.

<CodeDropdown
    number="5.1"
    title="Cookie Login Method"
    client
    code={[code.loginDefault]}
	language="javascript"
	languages={["JavaScript", "Python"]}
    open={false}
>
    This is the default and there in no need to pass anything (because the browser will send the cookie to your backend automatically).

</CodeDropdown>

<CodeDropdown
	number="5.2"
	title="Header Login Method"
	client
	code={[code.loginHeaders]}
	language="javascript"
	languages={["JavaScript", "Python"]}
	open={false}
></CodeDropdown>

After you run login successfully you will **get a cookie** called `permit_session` which will allow you to
load your `<iframe />` securly and successfully.

<HelpSupportTile />
