---
sidebar_position: 3
title: Filter users 
---

# Overview

How to get a list of users that exists to a specific environment. and how to filter them by email, key, tenant or role.

## Get All Users

But before we need to get our `API_SECRET_KEY` from the dashboard and get current `project_id` and `env_id`<br/>
- [Follow this link to get your API_SECRET_KEY](/api/api-with-cli/#get-your-api-key).<br/>
- [To get your project_id and env_id follow this link](/api/examples/get-project-and-env).

Replace `API_SECRET_KEY` with your `API_SECRET_KEY` and `project_id` and `env_id` with your `project_id` and `env_id` in the following command.

```bash
curl 'https://api.permit.io/v2/facts/project_id/env_id/users?page=1&per_page=10' \
  -H 'authorization: Bearer API_SECRET_KEY'

# the return user object will look like this:
#{
#    "data": [
#        {
#            "key": "key@permit.io",
#            "id": "445ed9ff1bc94caf8bcf686ea3eexxxx",
#            "organization_id": "903ebc2765b848289d6dfbd3c21exxxx",
#            "project_id": "3c4244c7bcab4c97990e5bc724daxxxx",
#            "environment_id": "9ba956da646948538efaee4cf10dxxxx",
#            "associated_tenants": [
#                {
#                    "tenant": "sample_tenant",
#                    "roles": [
#                        "board"
#                    ],
#                    "status": "active"
#                }
#            ],
#            "roles": [
#                {
#                    "role": "board",
#                    "tenant": "sample_tenant"
#                }
#            ],
#            "email": "email@permit.io",
#            "first_name": "",
#            "last_name": "",
#            "attributes": null
#        }
#    ],
#    "total_count": 1,
#    "page_count": 1
#}
```

## Filter Users by Email, Key and Name

Note the `search` query parameter in the following command.

```bash 
curl 'https://api.permit.io/v2/facts/project_id/env_id/users?search=key@permit.io&page=1&per_page=3' \
  -H 'authorization: Bearer API_SECRET_KEY'

# the return user object will look like this:
#{
#    "data": [
#        {
#            "key": "key@permit.io",
#            "id": "445ed9ff1bc94caf8bcf686ea3eexxxx",
#            "organization_id": "903ebc2765b848289d6dfbd3c21exxxx",
#            "project_id": "3c4244c7bcab4c97990e5bc724daxxxx",
#            "environment_id": "9ba956da646948538efaee4cf10dxxxx",
#            "associated_tenants": [
#                {
#                    "tenant": "sample_tenant",
#                    "roles": [
#                        "board"
#                    ],
#                    "status": "active"
#                }
#            ],
#            "roles": [
#                {
#                    "role": "board",
#                    "tenant": "sample_tenant"
#                }
#            ],
#            "email": "email@permit.io",
#            "first_name": "",
#            "last_name": "",
#            "attributes": null
#        }
#    ],
#    "total_count": 1,
#    "page_count": 1
#}
```

## Filter Users by Tenant
Note the `tenant_id` parameter in the following command.
You will get only users that have roles in the tenant with the `tenant_id` or `tenant_key` you can [get the tenant key in this page](https://app.permit.io/user-management/tenants).

```bash
curl 'https://api.permit.io/v2/facts/project_id/env_id/tenants/tenant_id/users?search=key@permit.io&page=1&per_page=3' \
  -H 'authorization: Bearer API_SECRET_KEY'

# the return user object will look like this:
#{
#    "data": [
#        {
#            "key": "key@permit.io",
#            "id": "d084172f638140e7a90622ff8311xxx",
#            "organization_id": "903ebc2765b848289d6dfbd3c21exxxx",
#            "project_id": "3c4244c7bcab4c97990e5bc724daxxxx",
#            "environment_id": "9ba956da646948538efaee4cf10dxxxx",
#            "associated_tenants": [
#                {
#                    "tenant": "default",
#                    "roles": [
#                        "board",
#                        "test",
#                        "admin"
#                    ],
#                    "status": "active"
#                }
#            ],
#            "roles": [
#                {
#                    "role": "board",
#                    "tenant": "default"
#                },
#                {
#                    "role": "test",
#                    "tenant": "default"
#                },
#                {
#                    "role": "admin",
#                    "tenant": "default"
#                }
#            ],
#            "email": "test@gmail.com",
#            "first_name": "",
#            "last_name": "",
#            "attributes": {}
#        }
#    ],
#    "total_count": 1,
#    "page_count": 1
#}
```

## Filter Users by Role
Note the `role` query parameter in the following command.<br/>
You can user `role_id` or `role_key` to filter users by role.<br/>
This filter will work also for the users tenant endpoint.

```bash 
#curl 'https://api.permit.io/v2/facts/project_id/env_id/tenants/tenant_id/users?search=key@permit.io&role=board&page=1&per_page=3' \
#  -H 'authorization: Bearer API_SECRET_KEY'
curl 'https://api.permit.io/v2/facts/project_id/env_id/users?search=key@permit.io&role=board&page=1&per_page=3' \
  -H 'authorization: Bearer API_SECRET_KEY'

# the return user object will look like this:
#{
#    "data": [
#        {
#            "key": "key@permit.io",
#            "id": "445ed9ff1bc94caf8bcf686ea3eexxxx",
#            "organization_id": "903ebc2765b848289d6dfbd3c21exxxx",
#            "project_id": "3c4244c7bcab4c97990e5bc724daxxxx",
#            "environment_id": "9ba956da646948538efaee4cf10dxxxx",
#            "associated_tenants": [
#                {
#                    "tenant": "sample_tenant",
#                    "roles": [
#                        "board"
#                    ],
#                    "status": "active"
#                }
#            ],
#            "roles": [
#                {
#                    "role": "board",
#                    "tenant": "sample_tenant"
#                }
#            ],
#            "email": "email@permit.io",
#            "first_name": "",
#            "last_name": "",
#            "attributes": null
#        }
#    ],
#    "total_count": 1,
#    "page_count": 1
#}
```
